#!/usr/bin/python
#encoding=utf-8

import sys
import os
import MySQLdb
import re
import ConfigParser
cf = ConfigParser.ConfigParser()
cf.read("info.conf")

def main():
    con=MySQLdb.connect(host='localhost',user='root',passwd='19941017')
    cur=con.cursor()
    con.select_db('BGP')
    cur.execute("select id,asn,link from AStable")
    aslist=cur.fetchall()
    sql=("select id from Ttable ")
    cur.execute(sql)
    result=cur.fetchall()
    idlist=[]
    for i in result:
	idlist.append(i[0])
    asnlist=cf.items("masn")
    for j in asnlist:
	a=j[0]
        b=j[1].split(',')
	mylist=""
    	for i in b:
	    hasfind=0
	    for k in aslist:
		if k[0] in idlist:
		    if str(k[1])==i:
			hasfind=1
		    	mylist=mylist+k[2].split('/')[2]+","
	    if hasfind==0 :
		mylist=mylist+i+","
	print mylist
		
		
		#cf.write(open("info.conf", "w")) 
		    
if __name__=='__main__':
    main()
         
        
